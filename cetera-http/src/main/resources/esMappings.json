{
  "mappings" : {
    "document" : {
      "_parent" : {
        "type" : "domain"
      },
      "_routing" : {
        "required" : true
      },
      "properties" : {
        "fts_analyzed" : {
          "type": "string",
          "index": "analyzed",
          "analyzer": "snowball_en"
        },
        "fts_raw" : {
          "type": "string",
          "index": "not_analyzed"
        },
        "approving_domain_ids" : {
          "type" : "long"
        },
        "is_approved_by_parent_domain" : {
          "type" : "boolean"
        },
        "datatype" : {
          "type" : "string",
          "index": "not_analyzed"
        },
        "viewtype" : {
          "type" : "string",
          "index": "not_analyzed"
        },
        "is_public" : {
          "type" : "boolean"
        },
        "is_moderation_approved" : {
          "type" : "boolean"
        },
        "is_default_view" : {
          "type" : "boolean"
        },
        "popularity" : {
          "type" : "float"
        },
        "update_freq" : {
          "type" : "float"
        },
        "updated_at" : {
          "type" : "date",
          "format" : "dateOptionalTime"
        },
        "created_at" : {
          "type" : "date",
          "format" : "dateOptionalTime"
        },
        "page_views" : {
          "properties": {
            "page_views_last_week": {
              "type": "long"
            },
            "page_views_last_month": {
              "type": "long"
            },
            "page_views_total": {
              "type": "long"
            },
            "page_views_last_week_log": {
              "type": "float"
            },
            "page_views_last_month_log": {
              "type": "float"
            },
            "page_views_total_log": {
              "type": "float"
            }
          }
        },
        "indexed_metadata" : {
          "properties" : {
            "columns_description" : {
              "type" : "string",
              "copy_to": [ "fts_analyzed", "fts_raw" ],
              "fields" : {
                "raw" : {"type" : "string", "index" : "not_analyzed"},
                "analyzed" : {"type" : "string", "analyzer" : "snowball_en"}
              }
            },
            "columns_name" : {
              "type" : "string",
              "copy_to": [ "fts_analyzed", "fts_raw" ],
              "fields" : {
                "raw" : {"type" : "string", "index" : "not_analyzed"},
                "analyzed" : {"type" : "string", "analyzer" : "snowball_en"}
              }
            },
            "columns_field_name" : {
              "type" : "string",
              "copy_to": [ "fts_analyzed", "fts_raw" ],
              "fields" : {
                "raw" : {"type" : "string", "index" : "not_analyzed"},
                "analyzed" : {"type" : "string", "analyzer" : "snowball_en"}
              }
            },
            "description" : {
              "type" : "string",
              "copy_to": [ "fts_analyzed", "fts_raw" ],
              "fields" : {
                "raw" : {"type" : "string", "index" : "not_analyzed"},
                "analyzed" : {"type" : "string", "analyzer" : "snowball_en"}
              }
            },
            "name" : {
              "type" : "string",
              "copy_to": [ "fts_analyzed", "fts_raw" ],
              "fields" : {
                "raw" : {"type" : "string", "index" : "not_analyzed"},
                "analyzed" : {"type" : "string", "analyzer" : "snowball_en"}
              }
            }
          },
          "type" : "object"
        },
        "resource" : {
          "enabled" : false,
          "type" : "nested",
          "properties" : {
            "page_views" : {
              "properties": {
                "page_views_last_week": {
                  "type": "long"
                },
                "page_views_last_month": {
                  "type": "long"
                },
                "page_views_total": {
                  "type": "long"
                }
              }
            },
            "description" : {
              "type" : "string"
            },
            "nbe_fxf" : {
              "type" : "string"
            },
            "obe_fxf" : {
              "type" : "string"
            },
            "id" : {
              "type" : "string"
            },
            "updatedAt" : {
              "type" : "date",
              "format" : "dateOptionalTime"
            },
            "createdAt" : {
              "type" : "date",
              "format" : "dateOptionalTime"
            },
            "type" : {
              "type" : "string"
            },
            "name" : {
              "type" : "string"
            },
            "columns_description" : {
              "type" : "string",
              "copy_to": [ "fts_analyzed", "fts_raw" ],
              "fields" : {
                "raw" : {"type" : "string", "index" : "not_analyzed"},
                "analyzed" : {"type" : "string", "analyzer" : "snowball_en"}
              }
            },
            "columns_name" : {
              "type" : "string",
              "copy_to": [ "fts_analyzed", "fts_raw" ],
              "fields" : {
                "raw" : {"type" : "string", "index" : "not_analyzed"},
                "analyzed" : {"type" : "string", "analyzer" : "snowball_en"}
              }
            },
            "columns_field_name" : {
              "type" : "string",
              "copy_to": [ "fts_analyzed", "fts_raw" ],
              "fields" : {
                "raw" : {"type" : "string", "index" : "not_analyzed"},
                "analyzed" : {"type" : "string", "analyzer" : "snowball_en"}
              }
            }
          }
        },
        "socrata_id" : {
          "properties" : {
            "dataset_id" : {
              "type" : "string"
            },
            "domain_id" : {
              "type" : "long"
            }
          },
          "type" : "object"
        },
        "animl_annotations" : {
          "properties" : {
            "categories" : {
              "type" : "nested",
              "properties" : {
                "name" : {
                  "type" : "string",
                  "analyzer": "case_insensitive_en",
                  "copy_to": [ "fts_analyzed", "fts_raw" ],
                  "fields" : {
                    "raw" : {"type" : "string", "index" : "not_analyzed", "store" : true},
                    "analyzed" : {"type" : "string", "analyzer" : "snowball_en"}
                  }
                },
                "score" : {"type" : "float"}
              }
            },
            "tags" : {
              "type" : "nested",
              "properties" : {
                "name" : {
                  "type" : "string",
                  "analyzer": "case_insensitive_en",
                  "copy_to": [ "fts_analyzed", "fts_raw" ],
                  "fields" : {
                    "raw" : {"type" : "string", "index" : "not_analyzed", "store" : true},
                    "analyzed" : {"type" : "string", "analyzer" : "snowball_en"}
                  }
                },
                "score" : {"type" : "float"}
              }
            }
          }
        },
        "customer_tags" : {
          "type" : "string",
          "analyzer": "case_insensitive_en",
          "copy_to": [ "fts_analyzed", "fts_raw" ],
          "fields": {
            "raw" : {"type" : "string", "index" : "not_analyzed"},
            "analyzed" : {"type" : "string", "analyzer" : "snowball_en"}
          }
        },
        "customer_category" : {
          "type" : "string",
          "analyzer": "case_insensitive_en",
          "copy_to": [ "fts_analyzed", "fts_raw" ],
          "fields" : {
            "raw" : {"type" : "string", "index" : "not_analyzed"},
            "analyzed" : {"type" : "string", "analyzer" : "snowball_en"}
          }
        },
        "customer_metadata_flattened" : {
          "type": "nested",
          "properties" : {
            "key" : {
              "type" : "string",
              "copy_to": [ "fts_analyzed", "fts_raw" ],
              "fields" : {
                "raw" : {"type" : "string", "index" : "not_analyzed", "store" : true},
                "analyzed" : {"type" : "string", "analyzer" : "snowball_en"}
              }
            },
            "value" : {
              "type" : "string",
              "copy_to": [ "fts_analyzed", "fts_raw" ],
              "fields" : {
                "raw" : {"type" : "string", "index" : "not_analyzed", "store" : true},
                "analyzed" : {"type" : "string", "analyzer" : "snowball_en"}
              }
            }
          }
        },
        "owner": {
          "properties": {
            "id": {
              "type": "string",
              "index": "not_analyzed"
            },
            "screen_name": {
              "type": "string",
              "analyzer": "screen_name",
              "fields": {
                "raw": { "type": "string", "index": "not_analyzed" }
              }
            }
          }
        },
        "shared_to" : {
          "type" : "string",
          "index" : "not_analyzed"
        }
      }
    },
    "domain": {
      "properties" : {
        "fts_analyzed" : {
          "type": "string",
          "index": "analyzed",
          "analyzer": "snowball_en"
        },
        "fts_raw" : {
          "type": "string",
          "index": "not_analyzed"
        },
        "domain_cname" : {
          "type" : "string",
          "analyzer" : "simple",
          "copy_to": [ "fts_analyzed", "fts_raw" ],
          "fields" : {
            "raw" : {"type" : "string", "index" : "not_analyzed"},
            "analyzed" : {"type" : "string", "index" : "analyzed", "analyzer" : "snowball_en"}
          }
        },
        "domain_id" : {
          "type": "long"
        },
        "site_title" : {
          "type" : "string",
          "copy_to": [ "fts_analyzed", "fts_raw" ],
          "fields" : {
            "raw" : {"type" : "string", "index" : "not_analyzed"},
            "analyzed" : {"type" : "string", "index" : "analyzed", "analyzer" : "snowball_en"}
          }
        },
        "organization" : {
          "type" : "string",
          "copy_to": [ "fts_analyzed", "fts_raw" ],
          "fields" : {
            "raw" : {"type" : "string", "index" : "not_analyzed"},
            "analyzed" : {"type" : "string", "index" : "analyzed", "analyzer" : "snowball_en"}
          }
        },
        "is_customer_domain" : {
          "type": "boolean"
        },
        "moderation_enabled" : {
          "type": "boolean"
        },
        "routing_approval_enabled" : {
          "type" : "boolean"
        },
        "locked_down" : {
          "type" : "boolean"
        },
        "api_locked_down" : {
          "type" : "boolean"
        }
      }
    },
    "user" : {
      "properties" : {
        "id" : {
          "type" : "string",
          "index" : "not_analyzed"
        },
        "screen_name" : {
          "type" : "string",
          "analyzer" : "screen_name",
          "fields" : {
            "raw" : { "type" : "string", "index" : "not_analyzed" }
          }
        },
        "email" : {
          "type" : "string",
          "analyzer" : "email",
          "fields" : {
            "raw" : { "type" : "string", "index" : "not_analyzed" }
          }
        },
        "roles" : {
          "type" : "nested",
          "properties" : {
            "domain_id" : {
              "type" : "long",
              "index" : "not_analyzed"
            },
            "role_name" : {
              "type" : "string",
              "index" : "not_analyzed"
            }
          }
        },
        "profile_image_url_large" : {
          "type" : "string",
          "index" : "no"
        },
        "profile_image_url_medium" : {
          "type" : "string",
          "index" : "no"
        },
        "profile_image_url_small" : {
          "type" : "string",
          "index" : "no"
        }
      }
    }
  }
}
